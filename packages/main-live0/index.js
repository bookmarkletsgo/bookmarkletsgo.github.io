(function(a,b,c){'use strict';function d(b,d){var e=!1,f=null,g=Math.random();a[g]=function(){e=!0},b="window["+g+"]();"+b;try{new Function(b)()}catch(a){console.error(a),f=a}c(function(){try{delete a[g]}catch(a){}"function"==typeof d&&d(f,e)})}var e=function(a,b,c,d){if(a)return a.addEventListener(b,c,d||!1),function(){a.removeEventListener(b,c,d||!1)}},f=function(){return"documentMode"in b},g=function(){return b.documentMode||-1},h=function(){return"?i="+Math.floor(new Date().getTime()/36e5)},i=function(a){try{return"string"==typeof a?JSON.parse(a):Object(a)}catch(a){return{}}},j="bookmarkletsgo",k="__BOOKMARKLETSGO",l="https://bookmarkletsgo.github.io",m="origin",n=8===g()?function(a,b){try{b.from=j,a.postMessage(JSON.stringify(b),"*")}catch(a){console.error(a),alert("Do not support this browser or this site.")}}:9===g()?function(a,b){b.from=j,a.postMessage(JSON.stringify(b),"*")}:function(a,b){b.from=j,a.postMessage(b,"*")},o=function(a,b){return e(a,"message",function(c){console.debug(c);var d=i(c.data),e=c[m];console.info(JSON.stringify({origin:e,from:d.from,type:d.type,content:(d.content||"").slice(0,20)})),d.from===j&&(e===l||e===a.location[m]||e===a[m]||c.source===a.opener)&&b(d,e)})};if(f()&&10>g())alert("Do not support this browser, please update your browser.");else{var p=a[k]||{};a[k]=p;var q=o(a,function(a){"script"===a.type?(!p["initialized"]&&d(a.content,function(a){a&&alert("Do not support this site due to Content Security Policy.\nDrag and drop bookmarklets to the 'Bookmarks Bar' of your browser.")}),q(),s&&s.close()):"opened_window_loaded"===a.content&&s&&n(s,{type:"get_script",content:"main"})}),r=l+"/bookmarklets.html"+h();a.name===j&&(a.name=null);var s=a.open(r,j);s||alert("Please allow \"Open Pop-up Windows\" on this site and try again.")}})(window,document,setTimeout);